databaseChangeLog:
- changeSet:
id: 20250930-1050-feat-create_business_tables-fk-sales-product
author: ${deployer}
comment: "Adicionar FK sales.product_id â†’ product.id"
preConditions:
onFail: MARK_RAN
not:
foreignKeyConstraintExists:
foreignKeyName: fk_sales_product
schemaName: app_core
tableName: sales
changes:
- addForeignKeyConstraint:
baseTableSchemaName: app_core
baseTableName: sales
baseColumnNames: product_id
referencedTableSchemaName: app_core
referencedTableName: product
referencedColumnNames: id
constraintName: fk_sales_product
onDelete: RESTRICT
onUpdate: RESTRICT
rollback:
- dropForeignKeyConstraint:
baseTableSchemaName: app_core
baseTableName: sales
constraintName: fk_sales_product